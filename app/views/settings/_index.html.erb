<div class="bg-gray-900" data-controller="settings">
<h1 class="sr-only">Account Settings</h1>

  <header class="border-b border-white/5">
    <nav class="flex overflow-x-auto py-4">
      <ul role="list" class="flex min-w-full flex-none gap-x-6 px-4 text-sm
       font-semibold leading-6 text-gray-400 sm:px-6 lg:px-8">
        <li>
          <a href="#" class="text-indigo-400">Account</a>
        </li>
        <li>
          <a href="#" class="">Notifications</a>
        </li>
        <li>
          <a href="#" class="">Billing</a>
        </li>
        <li>
          <a href="#" class="">Teams</a>
        </li>
        <li>
          <a href="#" class="">Integrations</a>
        </li>
      </ul>
    </nav>
  </header>


  <div class="divide-y divide-white/5">
    <div class="grid max-w-7xl grid-cols-1 gap-x-8 gap-y-10 px-4 py-16 sm:px-6 md:grid-cols-3 lg:px-8">
      <div>
        <h2 class="text-base font-semibold leading-7 text-white">Personal Information</h2>
        <p class="mt-1 text-sm leading-6 text-gray-400">Use a permanent address where you can receive mail.</p>
      </div>

        <%= form_for @user, url: user_path(@user), method: :put, html: { class: 'md:col-span-2' } do |f| %>
        <div class="grid grid-cols-1 gap-x-6 gap-y-8 sm:max-w-xl sm:grid-cols-6">
          <div class="col-span-full flex items-center gap-x-8">
            <% if @user && @user.avatar.attached? %>
              <%= image_tag url_for(@user.avatar), alt: "Profile Picture", class: "avatar-image
               rounded-full h-24 w-24 border-2 border-gray-300 object-cover",
                            data: { target: 'user.avatarImage' } %>
            <% else %>
              <img src="https://via.placeholder.com/150" alt="Profile Picture"
                   class="avatar-image
               rounded-full h-24 w-24 border-2 border-gray-300 object-cover"
                   data-target="user.avatarImage">
            <% end %>
            <div>
              <%= f.label :avatar, "Change avatar", class: "rounded-md bg-white/10 px-3 py-2 text-sm
             font-semibold text-white shadow-sm hover:bg-white/20" %>
              <%= f.file_field :avatar, class: "hidden" %>
              <p class="mt-2 text-xs leading-5 text-gray-400">JPG, GIF or PNG. 1MB max.</p>
            </div>
          </div>

          <%= render partial: 'helpers/cropper_modal' %>

          <div class="sm:col-span-3">
            <label for="name" class="block text-sm font-medium leading-6 text-white">Отображаемое имя</label>
            <div class="mt-2">
              <%= f.text_field :name, id: 'name', value: @user.name, autocomplete: 'given-name',
                               class: 'block w-full rounded-md border-0 bg-white/5 py-1.5 text-white
                     shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset
                     focus:ring-indigo-500 sm:text-sm sm:leading-6' %>
            </div>
          </div>

          <div class="sm:col-span-3">
            <label for="real_name" class="block text-sm font-medium leading-6 text-white">Настоящее имя</label>
            <div class="mt-2">
              <%= f.text_field :real_name, id: 'real_name',
                               value: @user.real_name,
                               autocomplete: 'family-name',
                               class: 'block w-full rounded-md border-0 bg-white/5 py-1.5 text-white
                      shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset
                      focus:ring-indigo-500 sm:text-sm sm:leading-6' %>
            </div>
          </div>

          <div class="col-span-full">
            <label for="email" class="block text-sm font-medium leading-6 text-white">Email</label>
            <div class="mt-2">
              <%= f.text_field :email, id: 'email',
                               value: @user.email,
                               autocomplete: 'email',
                               class: 'block w-full rounded-md border-0 bg-white/5 py-1.5 text-white
                      shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset
                      focus:ring-indigo-500 sm:text-sm sm:leading-6' %>
            </div>
          </div>

          <div class="col-span-full">
            <label for="link_username" class="block text-sm font-medium leading-6 text-white">
              Персональная ссылка
            </label>
            <div class="mt-2">
              <div class="flex rounded-md bg-white/5 ring-1 ring-inset ring-white/10 focus-within:ring-2
      focus-within:ring-inset focus-within:ring-indigo-500">
                <%= f.text_field :link_username, id: 'link_username', autocomplete: 'username',
                                 class: 'block w-full rounded-md border-0 bg-white/5 py-1.5 text-white
                      shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset
                      focus:ring-indigo-500 sm:text-sm sm:leading-6', placeholder: 'Username',
                                 data: { settings_target: 'username' },
                                 pattern: '[a-zA-Z0-9-]+' %>
              </div>
            </div>
            <% if @user.link_username.present? %>
              <p class="mt-2 text-gray-400 sm:text-sm" data-target="settings.fullLink">
                https://<%= @user.link_username %>.jammer.ru/
              </p>
            <% else %>
              <p class="mt-2 text-gray-400 sm:text-sm" data-target="settings.fullLink">
                https://username.jammer.ru/
              </p>
            <% end %>
          </div>

          <div class="col-span-full">
            <label for="timezone" class="block text-sm font-medium leading-6 text-white">Часовой пояс</label>
            <div class="mt-2 relative">
              <%= f.select :timezone,
                           options_for_select([ # Уберем (если что) один из вариантов: либо с UTC, либо без
                                                ['America/Anchorage', 'America/Anchorage (UTC-09:00)'],
                                                ['America/Caracas', 'America/Caracas (UTC-04:00)'],
                                                ['America/Chicago', 'America/Chicago (UTC-06:00)'],
                                                ['America/Denver', 'America/Denver (UTC-07:00)'],
                                                ['America/Los_Angeles', 'America/Los_Angeles (UTC-08:00)'],
                                                ['America/New_York', 'America/New_York (UTC-05:00)'],
                                                ['America/Santiago', 'America/Santiago (UTC-04:00)'],
                                                ['America/Sao_Paulo', 'America/Sao_Paulo (UTC-03:00)'],
                                                ['America/St_Johns', 'America/St_Johns (UTC-03:30)'],
                                                ['Asia/Bangkok', 'Asia/Bangkok (UTC+07:00)'],
                                                ['Asia/Chita', 'Asia/Chita (UTC+09:00)'],
                                                ['Asia/Dhaka', 'Asia/Dhaka (UTC+06:00)'],
                                                ['Asia/Hong_Kong', 'Asia/Hong_Kong (UTC+08:00)'],
                                                ['Asia/Irkutsk', 'Asia/Irkutsk (UTC+08:00)'],
                                                ['Asia/Kabul', 'Asia/Kabul (UTC+04:30)'],
                                                ['Asia/Kamchatka', 'Asia/Kamchatka (UTC+12:00)'],
                                                ['Asia/Karachi', 'Asia/Karachi (UTC+05:00)'],
                                                ['Asia/Kathmandu', 'Asia/Kathmandu (UTC+05:45)'],
                                                ['Asia/Kolkata', 'Asia/Kolkata (UTC+05:30)'],
                                                ['Asia/Krasnoyarsk', 'Asia/Krasnoyarsk (UTC+07:00)'],
                                                ['Asia/Magadan', 'Asia/Magadan (UTC+11:00)'],
                                                ['Asia/Omsk', 'Asia/Omsk (UTC+06:00)'],
                                                ['Asia/Tbilisi', 'Asia/Tbilisi (UTC+04:00)'],
                                                ['Asia/Tokyo', 'Asia/Tokyo (UTC+09:00)'],
                                                ['Asia/Vladivostok', 'Asia/Vladivostok (UTC+10:00)'],
                                                ['Asia/Yangon', 'Asia/Yangon (UTC+06:30)'],
                                                ['Asia/Yekaterinburg', 'Asia/Yekaterinburg (UTC+05:00)'],
                                                ['Atlantic/Azores', 'Atlantic/Azores (UTC-01:00)'],
                                                ['Atlantic/South_Georgia', 'Atlantic/South_Georgia (UTC-02:00)'],
                                                ['Australia/Darwin', 'Australia/Darwin (UTC+09:30)'],
                                                ['Australia/Sydney', 'Australia/Sydney (UTC+10:00)'],
                                                ['Europe/Berlin', 'Europe/Berlin (UTC+01:00)'],
                                                ['Europe/Helsinki', 'Europe/Helsinki (UTC+02:00)'],
                                                ['Europe/Kaliningrad', 'Europe/Kaliningrad (UTC+02:00)'],
                                                ['Europe/Kiev', 'Europe/Kiev (UTC+02:00)'],
                                                ['Europe/Minsk', 'Europe/Minsk (UTC+03:00)'],
                                                ['Europe/Moscow', 'Europe/Moscow (UTC+03:00)'],
                                                ['Europe/Prague', 'Europe/Prague (UTC+01:00)'],
                                                ['Europe/Samara', 'Europe/Samara (UTC+04:00)'],
                                                ['Europe/Ulyanovsk', 'Europe/Ulyanovsk (UTC+04:00)'],
                                                ['Pacific/Auckland', 'Pacific/Auckland (UTC+12:00)'],
                                                ['Pacific/Chatham', 'Pacific/Chatham (UTC+12:45)'],
                                                ['Pacific/Honolulu', 'Pacific/Honolulu (UTC-10:00)'],
                                                ['Pacific/Tongatapu', 'Pacific/Tongatapu (UTC+13:00)'],
                                              ], selected: @user.timezone),
                           {},
                           class: 'block w-full appearance-none rounded-md bg-gray-800 text-white py-2
                           px-3 leading-tight focus:outline-none focus:ring-2
                           focus:ring-indigo-500 max-h-48 overflow-y-auto',
                           id: 'timezone' %>
            </div>
          </div>

          <div class="col-span-full">
            <label for="status" class="block text-sm font-medium leading-6 text-white">Статус</label>
            <div class="mt-2">
              <%= f.text_field :status, id: 'status',
                               value: @user.status,
                               autocomplete: 'status',
                               class: 'block w-full rounded-md border-0 bg-white/5 py-1.5 text-white
                      shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset
                      focus:ring-indigo-500 sm:text-sm sm:leading-6' %>
            </div>
          </div>

          <div class="col-span-full">
            <label for="birthday" class="block text-sm font-medium leading-6 text-white">День рождения</label>
            <div class="mt-2">
              <%= f.text_field :birthday, id: 'birthday',
                               value: @user.birthday,
                               autocomplete: 'birthday',
                               type: 'date',
                               class: 'block w-full rounded-md border-0 bg-white/5 py-1.5 text-white
                      shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset
                      focus:ring-indigo-500 sm:text-sm sm:leading-6' %>
            </div>
          </div>

          <div class="col-span-full">
            <label for="location" class="block text-sm font-medium leading-6 text-white">Населенный пункт</label>
            <div class="mt-2">
              <%= f.text_field :location, id: 'location',
                               value: @user.location,
                               autocomplete: 'city',
                               class: 'block w-full rounded-md border-0 bg-white/5 py-1.5 text-white
                      shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset
                      focus:ring-indigo-500 sm:text-sm sm:leading-6' %>
            </div>
          </div>

          <div class="col-span-full">
            <label for="phone_number" class="block text-sm font-medium leading-6 text-white">Номер телефона</label>
            <div class="mt-2">
              <%= f.text_field :phone_number, id: 'phone_number',
                               value: @user.phone_number,
                               autocomplete: 'tel',
                               type: 'tel',
                               placeholder: '+7 (___) ___-__-__',
                               class: 'block w-full rounded-md border-0 bg-white/5 py-1.5 text-white
                      shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset
                      focus:ring-indigo-500 sm:text-sm sm:leading-6' %>
            </div>
          </div>
        </div>

        <div class="mt-8 flex">
          <% if @user.id == session[:current_user] %>
            <%= f.submit "Save", class: "mt-4 flex w-50 justify-center rounded-md border
                         border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white
                         shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500
                          focus:ring-offset-2" %>
          <% end %>
        </div>
        <% end %>
    </div>
    <%= render partial: 'helpers/good_notice' %>

    <div class="grid max-w-7xl grid-cols-1 gap-x-8 gap-y-10 px-4 py-16 sm:px-6 md:grid-cols-3 lg:px-8">
      <div>
        <h2 class="text-base font-semibold leading-7 text-white">Change password</h2>
        <p class="mt-1 text-sm leading-6 text-gray-400">Update your password associated with your account.</p>
      </div>

      <form class="md:col-span-2">
        <div class="grid grid-cols-1 gap-x-6 gap-y-8 sm:max-w-xl sm:grid-cols-6">
          <div class="col-span-full">
            <label for="current-password" class="block text-sm font-medium leading-6 text-white">
              Current password
            </label>
            <div class="mt-2">
              <input id="current-password" name="current_password" type="password" autocomplete="current-password"
                     class="block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1
                     ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500
                     sm:text-sm sm:leading-6">
            </div>
          </div>

          <div class="col-span-full">
            <label for="new-password" class="block text-sm font-medium leading-6 text-white">New password</label>
            <div class="mt-2">
              <input id="new-password" name="new_password" type="password" autocomplete="new-password"
                     class="block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm
                     ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset
                     focus:ring-indigo-500 sm:text-sm sm:leading-6">
            </div>
          </div>

          <div class="col-span-full">
            <label for="confirm-password" class="block text-sm font-medium leading-6 text-white">
              Confirm password
            </label>
            <div class="mt-2">
              <input id="confirm-password" name="confirm_password" type="password" autocomplete="new-password"
                     class="block w-full rounded-md border-0 bg-white/5 py-1.5
                     text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2
                      focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6">
            </div>
          </div>
        </div>

        <div class="mt-8 flex">
          <button type="submit" class="rounded-md bg-indigo-500 px-3 py-2 text-sm font-semibold
          text-white shadow-sm hover:bg-indigo-400 focus-visible:outline focus-visible:outline-2
           focus-visible:outline-offset-2 focus-visible:outline-indigo-500">Save</button>
        </div>
      </form>
    </div>

    <div class="grid max-w-7xl grid-cols-1 gap-x-8 gap-y-10 px-4 py-16 sm:px-6 md:grid-cols-3 lg:px-8">
      <div>
        <h2 class="text-base font-semibold leading-7 text-white">Log out other sessions</h2>
        <p class="mt-1 text-sm leading-6 text-gray-400">
          Please enter your password to confirm you would like to log out of your other
          sessions across all of your devices.
        </p>
      </div>

      <form class="md:col-span-2">
        <div class="grid grid-cols-1 gap-x-6 gap-y-8 sm:max-w-xl sm:grid-cols-6">
          <div class="col-span-full">
            <label for="logout-password" class="block text-sm font-medium leading-6 text-white">Your password</label>
            <div class="mt-2">
              <input id="logout-password" name="password" type="password" autocomplete="current-password"
                     class="block w-full rounded-md border-0 bg-white/5 py-1.5 text-white shadow-sm ring-1
                     ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500
                      sm:text-sm sm:leading-6">
            </div>
          </div>
        </div>

        <div class="mt-8 flex">
          <button type="submit" class="rounded-md bg-indigo-500 px-3 py-2 text-sm font-semibold
           text-white shadow-sm hover:bg-indigo-400 focus-visible:outline focus-visible:outline-2
            focus-visible:outline-offset-2 focus-visible:outline-indigo-500">Log out other sessions</button>
        </div>
      </form>
    </div>

    <div class="grid max-w-7xl grid-cols-1 gap-x-8 gap-y-10 px-4 py-16 sm:px-6 md:grid-cols-3 lg:px-8">
      <div>
        <h2 class="text-base font-semibold leading-7 text-white">Delete account</h2>
        <p class="mt-1 text-sm leading-6 text-gray-400">
          No longer want to use our service? You can delete your account here. This action is not reversible.
          All information related to this account will be deleted permanently.
        </p>
      </div>

      <form class="flex items-start md:col-span-2">
        <button type="submit" class="rounded-md bg-red-500 px-3 py-2 text-sm font-semibold
         text-white shadow-sm hover:bg-red-400">Yes, delete my account</button>
      </form>
    </div>
  </div>
</div>