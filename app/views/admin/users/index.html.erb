<div class="overflow-x-auto">
  <%= form_with url: admin_users_path, method: :get, local: true, class: 'flex items-center space-x-4 bg-gray-100 p-4 rounded-lg shadow-md mb-6' do |form| %>
    <div class="flex flex-col md:flex-row items-center space-y-2 md:space-y-0 md:space-x-4">
      <div class="flex items-center">
        <%= form.label :query, "Поиск пользователей", class: 'block font-semibold text-gray-700 mr-2' %>
        <%= form.text_field :query, value: params[:query], placeholder: '', class: 'border border-gray-300 rounded-lg p-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent' %>
      </div>
      <div class="flex items-center space-x-2">
        <%= form.submit 'Поиск', class: 'bg-blue-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-600 transition duration-150 ease-in-out shadow' %>
        <%= link_to 'Сбросить', admin_users_path, class: 'text-gray-500 hover:text-gray-700 font-semibold' %>
      </div>
    </div>
  <% end %>

  <% if @users.any? %>
    <div class="overflow-x-auto">
      <table class="min-w-full bg-white border border-gray-200">
        <thead>
        <tr class="bg-gray-100 text-gray-600 uppercase text-sm leading-normal">
          <th scope="col" class="flex justify-center py-3 px-6 text-left">
            <%= link_to '#', admin_users_path(sort_by: 'id', direction: toggle_direction('id')) %>
            <%= sort_arrow('id') %>
          </th>
          <th scope="col" class="py-3 px-6 text-left">
            <%= link_to 'Name', admin_users_path(sort_by: 'name', direction: toggle_direction('name')) %>
            <%= sort_arrow('name') %>
          </th>
          <th scope="col" class="py-3 px-6 text-left">
            <%= link_to 'Email', admin_users_path(sort_by: 'email', direction: toggle_direction('email')) %>
            <%= sort_arrow('email') %>
          </th>
          <th scope="col" class="py-3 px-6 text-left">
            <%= link_to 'Role', admin_users_path(sort_by: 'role', direction: toggle_direction('role')) %>
            <%= sort_arrow('role') %>
          </th>
          <th scope="col" class="py-3 px-6 text-left">
            <%= link_to 'Created At', admin_users_path(sort_by: 'created_at', direction: toggle_direction('created_at')) %>
            <%= sort_arrow('created_at') %>
          </th>
          <th scope="col" class="py-3 px-6 text-left"></th>
        </tr>
        </thead>
        <tbody class="text-gray-600 text-sm font-light">
        <%= render partial: 'admin/users/user' %>
        </tbody>
      </table>
    </div>
    <div class="p-4 mt-4 flex justify-center pagy-nav select-none">
      <%== pagy_nav(@pagy)
           .gsub('<a', '<a class="px-3 py-1 mx-1 text-blue-500 bg-gray-100 border border-gray-300 rounded-lg hover:bg-blue-500 hover:text-white [aria-disabled=\'true\']:opacity-70 [aria-disabled=\'true\']:cursor-not-allowed [aria-disabled=\'true\']:focus:outline-none"')
           .gsub('class="page active"', 'class="bg-blue-500 text-white border-blue-500"')
           .gsub('class="disabled"', 'class="text-gray-400 bg-gray-200 border-gray-300 cursor-not-allowed [aria-disabled=\'true\']:opacity-70 [aria-disabled=\'true\']:cursor-not-allowed [aria-disabled=\'true\']:focus:outline-none"')
      %>
    </div>

    <style>
        [aria-disabled="true"] {
            opacity: 0.6;
        }
    </style>
  <% else %>
    <p class="text-gray-500 mt-4">Пользователи не найдены по запросу "<%= params[:query] %>".</p>
  <% end %>
</div>
