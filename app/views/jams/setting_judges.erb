<div class="bg-white">
  <div class="mx-auto max-w-2xl px-4 py-16 sm:px-6 lg:max-w-7xl lg:px-8" data-controller="jams" data-jams-jam-id="<%= @jam.id %>">
    <div class="flex justify-between items-center mb-6">
      <h2 class="text-2xl font-bold tracking-tight text-gray-900">
        <%= t '.title' %>
      </h2>
    </div>

    <div class="mb-8">
      <h3 class="text-lg font-semibold text-gray-900 mb-4">
        <%= t 'jams.setting_judges.contributors_info1' %>
      </h3>
      <p class="text-gray-700 mb-4">
        <%= t 'jams.setting_judges.contributors_info2' %>
      </p>
      <ul class="list-disc pl-6 text-gray-700 space-y-2">
        <li>
          <span class="font-bold text-gray-900"> <%= t 'jams.setting_judges.host' %></span> — <%= t 'jams.setting_judges.contributors_info3' %>
        </li>
        <li>
          <span class="font-bold text-gray-900"><%= t 'jams.setting_judges.admin' %></span> — <%= t 'jams.setting_judges.contributors_info4' %>
        </li>
        <li>
          <span class="font-bold text-gray-900"><%= t 'jams.setting_judges.judge' %></span> — <%= t 'jams.setting_judges.contributors_info5' %>
        </li>
      </ul>
    </div>

    <%= form_with url: add_contributor_jam_path(@jam), method: :post, data: { action: "input->jams#search" }, class: "mb-8" do |f| %>
      <div class="flex flex-wrap gap-4">
        <%= f.text_field :search,
                         value: params[:search],
                         placeholder: t('jams.participate.name_or_mail'),
                         data: { games_target: "input" }, autocomplete: "off",
                         class: "block w-full max-w-lg sm:max-w-xs px-4 py-3 border
                           border-gray-300 rounded-md shadow-sm focus:outline-none
                           focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" %>
        <%= submit_tag t('jams.participate.add'),
                       class: "ml-2 inline-flex items-center justify-center px-4 py-2
        border border-transparent rounded-md shadow-sm text-sm
        font-medium text-white bg-indigo-600 hover:bg-indigo-700
        focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" %>
      </div>
    <% end %>

    <% if @contributors.any? %>
      <div class="overflow-x-auto w-full">
        <table class="table-auto w-full border-collapse border border-gray-200">
          <thead>
          <tr class="bg-gray-100 text-left text-gray-700">
            <th class="border border-gray-200 px-4 py-2 text-center"><%= t '.user' %></th>
            <th class="border border-gray-200 px-4 py-2 text-center"><%= t '.status' %></th>
            <th class="border border-gray-200 px-4 py-2 text-center"><%= t '.host' %></th>
            <th class="border border-gray-200 px-4 py-2 text-center"><%= t '.admin' %></th>
            <th class="border border-gray-200 px-4 py-2 text-center"><%= t '.judge' %></th>
            <th class="border border-gray-200 px-4 py-2 text-center"><%= t '.added' %></th>
            <th class="border border-gray-200 px-4 py-2 text-center"></th>
          </tr>
          </thead>
          <tbody class="text-gray-700">
          <% @contributors.each do |contributor| %>
            <tr>
              <td class="border border-gray-200 px-4 py-2 text-center"><%= contributor.user.name %></td>
              <td class="border border-gray-200 px-4 py-2 text-center"><%= contributor.status ? t('jams.setting_judges.status_added') : t('jams.setting_judges.status_pending') %></td>
              <td class="border border-gray-200 px-4 py-2 text-center">
                <input type="checkbox"
                       data-action="change->jams#updateContributorStatus"
                       data-user-id="<%= contributor.user_id %>"
                       data-status="is_host"
                       <%= 'checked' if contributor.is_host %> />
              </td>
              <td class="border border-gray-200 px-4 py-2 text-center">
                <input type="checkbox"
                       data-action="change->jams#updateContributorStatus"
                       data-user-id="<%= contributor.user_id %>"
                       data-status="is_admin"
                       <%= 'checked' if contributor.is_admin %> />
              </td>
              <td class="border border-gray-200 px-4 py-2 text-center">
                <input type="checkbox"
                       data-action="change->jams#updateContributorStatus"
                       data-user-id="<%= contributor.user_id %>"
                       data-status="is_judge"
                       <%= 'checked' if contributor.is_judge %> />
              </td>
              <td class="border border-gray-200 px-4 py-2 text-center"><%= time_ago_in_words(contributor.created_at) %> <%= t 'jams.setting_judges.ago' %></td>
              <td class="border border-gray-200 px-4 py-2 text-center">
                <%= button_to t('.delete_jam_contributor'),
                              delete_contributor_jam_path(@jam, user_id: contributor.user_id),
                              method: :delete,
                              data: { confirm: t('jams.setting_judges.success_delete') },
                              class: "text-red-500 hover:text-red-700" %>
              </td>
            </tr>
          <% end %>
          </tbody>
        </table>
      </div>
    <% end %>
  </div>
</div>
